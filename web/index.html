<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü•ú Cashew Network</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <span class="emoji">ü•ú</span>
                <h1>Cashew Network</h1>
            </div>
            <div class="status-indicator" id="status">
                <span class="dot"></span>
                <span class="text">Connecting...</span>
            </div>
        </header>

        <nav class="tabs">
            <button class="tab active" data-tab="networks">Networks</button>
            <button class="tab" data-tab="content">Content</button>
            <button class="tab" data-tab="participate">Participate</button>
            <button class="tab" data-tab="about">About</button>
        </nav>

        <main>
            <!-- Networks Tab -->
            <section id="networks-tab" class="tab-content active">
                <h2>Available Networks</h2>
                <div id="networks-list" class="networks-grid">
                    <div class="loading">Loading networks...</div>
                </div>
            </section>

            <!-- Content Tab -->
            <section id="content-tab" class="tab-content">
                <h2>Browse Content</h2>
                <div class="search-bar">
                    <input type="text" id="content-search" placeholder="Search by hash or name...">
                    <button onclick="searchContent()">Search</button>
                </div>
                <div id="content-list" class="content-grid">
                    <p class="placeholder">Enter a content hash to retrieve from the network.</p>
                </div>
            </section>

            <!-- Participate Tab -->
            <section id="participate-tab" class="tab-content">
                <h2>Participate in the Network</h2>
                
                <div class="card">
                    <h3>üîë Authentication</h3>
                    <p>To post content, vote, or host networks, you need a participation key.</p>
                    
                    <div class="auth-section">
                        <div id="anonymous-state" class="auth-state">
                            <p class="status-text">Currently viewing anonymously</p>
                            <button onclick="showAuthOptions()">Authenticate</button>
                        </div>
                        
                        <div id="authenticated-state" class="auth-state" style="display: none;">
                            <p class="status-text">Authenticated ‚úì</p>
                            <p class="key-info">Key: <span id="user-key"></span></p>
                            <button onclick="logout()">Disconnect</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>‚õèÔ∏è Earn a Key (Proof-of-Work)</h3>
                    <p>Generate a participation key by solving a computational puzzle. This takes ~10 minutes on average hardware.</p>
                    <button id="pow-button" onclick="startPoW()">Start Mining</button>
                    <div id="pow-progress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="pow-fill"></div>
                        </div>
                        <p id="pow-status">Mining... 0%</p>
                    </div>
                </div>

                <div class="card">
                    <h3>üìä Your Capabilities</h3>
                    <ul class="capabilities-list">
                        <li id="cap-read">‚úì Read content (everyone)</li>
                        <li id="cap-post">‚úó Post content (requires key)</li>
                        <li id="cap-vote">‚úó Vote on content (requires key)</li>
                        <li id="cap-host">‚úó Host networks (requires key + reputation)</li>
                    </ul>
                </div>
            </section>

            <!-- About Tab -->
            <section id="about-tab" class="tab-content">
                <h2>About Cashew</h2>
                
                <div class="card">
                    <h3>What is Cashew?</h3>
                    <p>Cashew is a decentralized, self-hosted P2P network where:</p>
                    <ul>
                        <li><strong>Participation ‚â† Exposure:</strong> Browse anonymously, participate with keys</li>
                        <li><strong>Hosting ‚â† Vulnerability:</strong> Onion routing and IP protection</li>
                        <li><strong>Trust = Cryptography:</strong> No central authority, all verification is cryptographic</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Network Architecture</h3>
                    <ul>
                        <li><strong>Things:</strong> Content items (max 500MB) stored across redundant nodes</li>
                        <li><strong>Networks:</strong> Small node clusters (3-20 nodes) hosting specific Things</li>
                        <li><strong>Keys:</strong> Cryptographic participation tokens (NOT currency)</li>
                        <li><strong>Reputation:</strong> Earned by uptime, bandwidth, and hosting</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Security & Privacy</h3>
                    <ul>
                        <li>Multi-hop onion routing (3 hops default)</li>
                        <li>Ephemeral addressing (1hr TTL)</li>
                        <li>Traffic padding (128-byte blocks)</li>
                        <li>Peer rotation (30min cycles)</li>
                        <li>Rate limiting (60/min, 1000/hr)</li>
                        <li>DDoS mitigation (10 conn/IP max)</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>Gateway Status</h3>
                    <div id="gateway-stats">
                        <p>Loading...</p>
                    </div>
                </div>

                <div class="card">
                    <p class="version">Cashew Network Gateway v1.0 | Built with C++20</p>
                    <p class="mascot">üê± Mascot: Mona (2channel cat)</p>
                </div>
            </section>
        </main>

        <footer>
            <p>Freedom over profit ‚Ä¢ Privacy over surveillance ‚Ä¢ Participation over wealth</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
